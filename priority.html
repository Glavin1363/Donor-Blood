<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeLink | Priority Matching for Critical Cases</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
       :root {
    --primary: #e63946;
    --primary-dark: #d62839;
    --secondary: #457b9d;
    --dark: #1d3557;
    --light: #f1faee;
    --gray: #6c757d;
    --light-gray: #f8f9fa;
    --success: #2a9d8f;
    --warning: #e9c46a;
    --danger: #e76f51;
    --white: #ffffff;
    --black: #212529;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Poppins', sans-serif;
    color: var(--black);
    background-color: var(--light);
    line-height: 1.6;
}

.container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.2;
    margin-bottom: 1rem;
}

h1 {
    font-size: 2.5rem;
}

h2 {
    font-size: 2rem;
    margin-bottom: 2rem;
    text-align: center;
    position: relative;
}

h2::after {
    content: '';
    display: block;
    width: 80px;
    height: 4px;
    background-color: var(--primary);
    margin: 0.5rem auto;
}

p {
    margin-bottom: 1rem;
}

/* Buttons */
.btn {
    display: inline-block;
    padding: 0.5rem 1.5rem;
    border-radius: 4px;
    font-weight: 500;
    text-align: center;
    text-decoration: none;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.btn-primary {
    background-color: var(--primary);
    color: var(--white);
}

.btn-primary:hover {
    background-color: var(--primary-dark);
}

.btn-outline {
    background-color: transparent;
    border-color: var(--primary);
    color: var(--primary);
}

.btn-outline:hover {
    background-color: var(--primary);
    color: var(--white);
}

.btn-large {
    padding: 0.75rem 2rem;
    font-size: 1.1rem;
}

/* Header */
header {
    background-color: var(--white);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    position: sticky;
    top: 0;
    z-index: 100;
}

nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
}

.logo {
    display: flex;
    align-items: center;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary);
}

.logo i {
    margin-right: 0.5rem;
    font-size: 1.8rem;
}

.nav-links {
    display: flex;
    list-style: none;
}

.nav-links li {
    margin-left: 2rem;
}

.nav-links a {
    text-decoration: none;
    color: var(--black);
    font-weight: 500;
    transition: color 0.3s ease;
}

.nav-links a:hover {
    color: var(--primary);
}

.nav-links a.active {
    color: var(--primary);
    font-weight: 600;
}

.hamburger {
    display: none;
    font-size: 1.5rem;
    cursor: pointer;
}

/* Hero Section */
.hero {
    padding: 4rem 0;
    background: linear-gradient(135deg, rgba(241, 250, 238, 0.9) 0%, rgba(241, 250, 238, 0.9) 100%), url('https://images.unsplash.com/photo-1576091160550-2173dba999ef?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80') no-repeat center center/cover;
}

.hero .container {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.hero-content {
    flex: 1;
    padding-right: 2rem;
}

.hero-content h1 {
    font-size: 3rem;
    margin-bottom: 1.5rem;
    color: var(--dark);
}

.hero-content p {
    font-size: 1.2rem;
    margin-bottom: 2rem;
    color: var(--gray);
}

.hero-image {
    flex: 1;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.hero-image img {
    width: 100%;
    height: auto;
    display: block;
}

/* Priority Cases Section */
.priority-cases {
    padding: 4rem 0;
    background-color: var(--white);
}

.case-filters {
    display: flex;
    justify-content: space-between;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.filter-group {
    flex: 1;
    min-width: 200px;
}

.filter-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.filter-group select {
    width: 100%;
    padding: 0.5rem;
    border-radius: 4px;
    border: 1px solid var(--gray);
    font-family: inherit;
}

.cases-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
}

.case-card {
    background-color: var(--white);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
    border-left: 4px solid var(--primary);
}

.back-button {
    margin-left: 5px; /* Space between back button and logo */
}

.case-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
}

.case-header {
    padding: 1rem;
    background-color: var(--light);
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.urgency-critical {
    color: var(--danger);
    font-weight: 600;
}

.urgency-urgent {
    color: var(--warning);
    font-weight: 600;
}

.urgency-high {
    color: var(--secondary);
    font-weight: 600;
}

.case-body {
    padding: 1rem;
}

.case-body h3 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    color: var(--dark);
}

.case-details {
    margin-bottom: 1rem;
}

.detail-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
}

.detail-label {
    font-weight: 500;
    color: var(--gray);
}

.detail-value {
    font-weight: 600;
}

.time-remaining {
    display: flex;
    align-items: center;
    color: var(--danger);
    font-weight: 600;
    margin-top: 1rem;
}

.time-remaining i {
    margin-right: 0.5rem;
}

.case-footer {
    padding: 1rem;
    background-color: var(--light);
    border-top: 1px solid #eee;
    text-align: center;
}

/* Modal */
.case-details-modal,
.report-case-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background-color: var(--white);
    border-radius: 8px;
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    overflow-y: auto;
    padding: 2rem;
    position: relative;
    box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
}

.close-modal {
    position: absolute;
    top: 1rem;
    right: 1rem;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--gray);
}

.close-modal:hover {
    color: var(--black);
}

.modal-body {
    margin: 1.5rem 0;
}

.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    margin-top: 2rem;
}

/* Report Case Form */
.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 0.75rem;
    border-radius: 4px;
    border: 1px solid var(--gray);
    font-family: inherit;
}

.form-group textarea {
    min-height: 100px;
    resize: vertical;
}

.form-row {
    display: flex;
    gap: 1rem;
}

.form-row .form-group {
    flex: 1;
}

.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    margin-top: 2rem;
}

/* How It Works Section */
.how-it-works {
    padding: 4rem 0;
    background-color: var(--light);
}

.steps {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.step {
    background-color: var(--white);
    padding: 2rem;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s ease;
}

.step:hover {
    transform: translateY(-10px);
}

.step-number {
    width: 50px;
    height: 50px;
    background-color: var(--primary);
    color: var(--white);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.5rem;
    font-weight: 700;
    margin: 0 auto 1rem;
}

.step h3 {
    font-size: 1.3rem;
    margin-bottom: 1rem;
    color: var(--dark);
}

/* Stats Section */
.stats {
    padding: 4rem 0;
    background-color: var(--primary);
    color: var(--white);
}

.stats .container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    text-align: center;
}

.stat-card h3 {
    font-size: 3rem;
    margin-bottom: 0.5rem;
}

.stat-card p {
    font-size: 1.2rem;
    opacity: 0.9;
}

/* Footer */
footer {
    background-color: var(--dark);
    color: var(--white);
    padding: 4rem 0 0;
}

.footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
}

.footer-section h3 {
    font-size: 1.3rem;
    margin-bottom: 1.5rem;
    color: var(--white);
}

.footer-section p {
    margin-bottom: 1.5rem;
    opacity: 0.8;
}

.footer-section i {
    margin-right: 0.5rem;
}

.social-icons {
    display: flex;
    gap: 1rem;
}

.social-icons a {
    color: var(--white);
    font-size: 1.2rem;
    opacity: 0.8;
    transition: opacity 0.3s ease;
}

.social-icons a:hover {
    opacity: 1;
}

.footer-bottom {
    padding: 1.5rem 0;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    text-align: center;
}

/* Responsive Design */
@media (max-width: 992px) {
    .hero .container {
        flex-direction: column;
    }
    
    .hero-content {
        padding-right: 0;
        margin-bottom: 2rem;
        text-align: center;
    }
    
    h2::after {
        margin: 0.5rem auto;
    }
}

@media (max-width: 768px) {
    .nav-links {
        display: none;
    }
    
    .hamburger {
        display: block;
    }
    
    .hero-content h1 {
        font-size: 2.2rem;
    }
    
    .case-filters {
        flex-direction: column;
    }
    
    .filter-group {
        width: 100%;
    }

    .form-row {
        flex-direction: column;
        gap: 0;
    }
}

@media (max-width: 576px) {
    .hero-content h1 {
        font-size: 1.8rem;
    }
    
    .steps {
        grid-template-columns: 1fr;
    }
    
    .footer-content {
        grid-template-columns: 1fr;
    }
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.case-card {
    animation: fadeIn 0.5s ease forwards;
}

.case-card:nth-child(1) { animation-delay: 0.1s; }
.case-card:nth-child(2) { animation-delay: 0.2s; }
.case-card:nth-child(3) { animation-delay: 0.3s; }
.case-card:nth-child(4) { animation-delay: 0.4s; }
.case-card:nth-child(5) { animation-delay: 0.5s; }
.case-card:nth-child(6) { animation-delay: 0.6s; }

@keyframes countUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.stat-card h3 {
    animation: countUp 1s ease forwards;
} 
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="back-button">
                    <button id="back-btn" class="btn btn-outline">
                        &larr; <!-- This is the left arrow symbol -->
                    </button>
                </div>
                <div class="logo">
                    <i class="fas fa-heartbeat"></i>
                    <span>LifeLink</span>
                </div>
                <ul class="nav-links">
                    <li><a href="#" class="active">Priority Matching</a></li>
                </ul>
                <div class="hamburger">
                    <i class="fas fa-bars"></i>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Priority Matching for Critical Cases</h1>
                    <p>Our advanced algorithm prioritizes recipients based on urgency and medical need to ensure life-threatening cases get faster responses.</p>
                    <button class="btn btn-primary btn-large" id="reportCaseBtn">Report Critical Case</button>
                </div>
                <div class="hero-image">
                    <img src="https://images.unsplash.com/photo-1576091160550-2173dba999ef?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Healthcare professionals">
                </div>
            </div>
        </section>

        <section class="priority-cases">
            <div class="container">
                <h2>Active Critical Cases</h2>
                <div class="case-filters">
                    <div class="filter-group">
                        <label for="blood-type">Filter by Blood Type:</label>
                        <select id="blood-type">
                            <option value="all">All Types</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="organ-type">Filter by Organ:</label>
                        <select id="organ-type">
                            <option value="all">All Organs</option>
                            <option value="kidney">Kidney</option>
                            <option value="liver">Liver</option>
                            <option value="heart">Heart</option>
                            <option value="lung">Lung</option>
                            <option value="pancreas">Pancreas</option>
                            <option value="blood">Blood</option>
                            <option value="bone marrow">Bone Marrow</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="urgency">Filter by Urgency:</label>
                        <select id="urgency">
                            <option value="all">All Urgency Levels</option>
                            <option value="critical">Critical (0-12 hours)</option>
                            <option value="urgent">Urgent (12-24 hours)</option>
                            <option value="high">High (24-48 hours)</option>
                        </select>
                    </div>
                </div>

                <div class="cases-grid">
                    <!-- Case cards will be dynamically inserted here by JavaScript -->
                </div>

                <div class="case-details-modal" id="caseModal">
                    <div class="modal-content">
                        <span class="close-modal">&times;</span>
                        <h3 id="modalTitle">Case Details</h3>
                        <div class="modal-body" id="modalBody">
                            <!-- Details will be filled by JavaScript -->
                        </div>
                        <div class="modal-actions">
                            <button class="btn btn-outline" id="closeBtn">Close</button>
                            <button class="btn btn-primary" id="respondBtn">Respond to Case</button>
                        </div>
                    </div>
                </div>

                <div class="report-case-modal" id="reportModal">
                    <div class="modal-content">
                        <span class="close-modal">&times;</span>
                        <h3>Report Critical Case</h3>
                        <form id="caseForm">
                            <div class="form-group">
                                <label for="caseTitle">Case Title*</label>
                                <input type="text" id="caseTitle" required>
                            </div>
                            <div class="form-group">
                                <label for="caseDescription">Description*</label>
                                <textarea id="caseDescription" rows="3" required></textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="caseBloodType">Blood Type*</label>
                                    <select id="caseBloodType" required>
                                        <option value="">Select</option>
                                        <option value="A+">A+</option>
                                        <option value="A-">A-</option>
                                        <option value="B+">B+</option>
                                        <option value="B-">B-</option>
                                        <option value="AB+">AB+</option>
                                        <option value="AB-">AB-</option>
                                        <option value="O+">O+</option>
                                        <option value="O-">O-</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="caseOrgan">Organ/Type*</label>
                                    <select id="caseOrgan" required>
                                        <option value="">Select</option>
                                        <option value="kidney">Kidney</option>
                                        <option value="liver">Liver</option>
                                        <option value="heart">Heart</option>
                                        <option value="lung">Lung</option>
                                        <option value="pancreas">Pancreas</option>
                                        <option value="blood">Blood</option>
                                        <option value="bone marrow">Bone Marrow</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="caseHospital">Hospital*</label>
                                    <input type="text" id="caseHospital" required>
                                </div>
                                <div class="form-group">
                                    <label for="caseLocation">Location*</label>
                                    <input type="text" id="caseLocation" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="caseUrgency">Urgency Level*</label>
                                    <select id="caseUrgency" required>
                                        <option value="">Select</option>
                                        <option value="critical">Critical (0-12 hours)</option>
                                        <option value="urgent">Urgent (12-24 hours)</option>
                                        <option value="high">High (24-48 hours)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="caseTimeRemaining">Time Remaining*</label>
                                    <input type="text" id="caseTimeRemaining" placeholder="e.g., 12 hours" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="caseDonorsNeeded">Number of Donors Needed*</label>
                                <input type="number" id="caseDonorsNeeded" min="1" required>
                            </div>
                            <div class="form-group">
                                <label for="caseContact">Contact Information*</label>
                                <input type="text" id="caseContact" placeholder="Name and phone number" required>
                            </div>
                            <div class="form-group">
                                <label for="caseDetails">Additional Case Details*</label>
                                <textarea id="caseDetails" rows="4" required></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" id="cancelCaseBtn">Cancel</button>
                                <button type="submit" class="btn btn-primary">Submit Case</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <section class="how-it-works">
            <div class="container">
                <h2>How Priority Matching Works</h2>
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h3>Critical Case Reported</h3>
                        <p>Medical professionals report cases with urgency level and time constraints.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <h3>Algorithm Prioritizes</h3>
                        <p>Our system evaluates medical urgency, compatibility, and time sensitivity.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <h3>Donors Notified</h3>
                        <p>Compatible donors in the area receive immediate notifications.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <h3>Life-Saving Connection</h3>
                        <p>Donors can quickly respond and arrange for donation.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="stats">
            <div class="container">
                <div class="stat-card">
                    <h3 id="livesSaved">0</h3>
                    <p>Lives Saved</p>
                </div>
                <div class="stat-card">
                    <h3 id="casesMatched">0</h3>
                    <p>Critical Cases Matched</p>
                </div>
                <div class="stat-card">
                    <h3 id="responseTime">0</h3>
                    <p>Avg. Response Time (mins)</p>
                </div>
                <div class="stat-card">
                    <h3 id="successRate">0%</h3>
                    <p>Success Rate</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>LifeLink</h3>
                    <p>Connecting donors with recipients in critical need through advanced matching technology.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Health Ave, Medical City</p>
                    <p><i class="fas fa-phone"></i> (123) 456-7890</p>
                    <p><i class="fas fa-envelope"></i> info@lifelink.org</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 LifeLink. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
         // Add functionality to the back button
         document.getElementById('back-btn').addEventListener('click', function() {
            window.location.href = 'dashboard.html'; // Navigate to dashboard.html
        });

        document.addEventListener('DOMContentLoaded', function() {
    // Initialize critical cases from localStorage or with sample data
    let criticalCases = JSON.parse(localStorage.getItem('criticalCases')) || [
        {
            id: Date.now(),
            title: "Urgent: O+ Blood Needed",
            description: "Patient undergoing emergency surgery requires O+ blood transfusion within 12 hours.",
            bloodType: "O+",
            organ: "Blood",
            hospital: "City General Hospital",
            location: "New York, NY",
            urgency: "critical",
            timeRemaining: "11 hours 23 minutes",
            donorsNeeded: 5,
            donorsNotified: 10,
            contact: "Dr. Smith - (555) 123-4567",
            caseDetails: "25-year-old male with severe trauma from accident. Requires 4 units of O+ blood for emergency surgery. Cross-match already completed.",
            timestamp: Date.now()
        },
        {
            id: Date.now() + 1,
            title: "Liver Transplant Urgent",
            description: "Patient with acute liver failure needs compatible donor within 24 hours.",
            bloodType: "B-",
            organ: "Liver",
            hospital: "University Medical Center",
            location: "Boston, MA",
            urgency: "urgent",
            timeRemaining: "22 hours 15 minutes",
            donorsNeeded: 1,
            donorsNotified: 3,
            contact: "Dr. Johnson - (555) 987-6543",
            caseDetails: "42-year-old female with acute liver failure from autoimmune hepatitis. MELD score of 35. Compatible with blood type B- donors only.",
            timestamp: Date.now() + 1
        },
        {
            id: Date.now() + 2,
            title: "Kidney Match Needed",
            description: "Patient on dialysis needs kidney transplant within 48 hours.",
            bloodType: "A+",
            organ: "Kidney",
            hospital: "Memorial Hospital",
            location: "Chicago, IL",
            urgency: "high",
            timeRemaining: "45 hours 30 minutes",
            donorsNeeded: 1,
            donorsNotified: 5,
            contact: "Dr. Lee - (555) 456-7890",
            caseDetails: "38-year-old male with end-stage renal disease. Blood type A+, CMV negative. Has been on waiting list for 2 years.",
            timestamp: Date.now() + 2
        }
    ];

    // Save to localStorage
    localStorage.setItem('criticalCases', JSON.stringify(criticalCases));

    // DOM elements
    const casesGrid = document.querySelector('.cases-grid');
    const bloodTypeFilter = document.getElementById('blood-type');
    const organTypeFilter = document.getElementById('organ-type');
    const urgencyFilter = document.getElementById('urgency');
    const caseModal = document.getElementById('caseModal');
    const reportModal = document.getElementById('reportModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    const closeModalBtns = document.querySelectorAll('.close-modal');
    const closeBtn = document.getElementById('closeBtn');
    const respondBtn = document.getElementById('respondBtn');
    const reportCaseBtn = document.getElementById('reportCaseBtn');
    const cancelCaseBtn = document.getElementById('cancelCaseBtn');
    const caseForm = document.getElementById('caseForm');
    
    // Stats elements
    const livesSavedEl = document.getElementById('livesSaved');
    const casesMatchedEl = document.getElementById('casesMatched');
    const responseTimeEl = document.getElementById('responseTime');
    const successRateEl = document.getElementById('successRate');

    // Display cases in the grid
    function displayCases(cases) {
        casesGrid.innerHTML = '';
        
        // Sort cases by urgency (critical first)
        cases.sort((a, b) => {
            const urgencyOrder = { critical: 1, urgent: 2, high: 3 };
            return urgencyOrder[a.urgency] - urgencyOrder[b.urgency];
        });
        
        cases.forEach(caseItem => {
            const caseCard = document.createElement('div');
            caseCard.className = 'case-card';
            caseCard.dataset.id = caseItem.id;
            
            let urgencyClass = '';
            if (caseItem.urgency === 'critical') urgencyClass = 'urgency-critical';
            else if (caseItem.urgency === 'urgent') urgencyClass = 'urgency-urgent';
            else if (caseItem.urgency === 'high') urgencyClass = 'urgency-high';
            
            caseCard.innerHTML = `
                <div class="case-header">
                    <span class="${urgencyClass}">${caseItem.urgency.toUpperCase()}</span>
                    <span class="blood-type">${caseItem.bloodType}</span>
                </div>
                <div class="case-body">
                    <h3>${caseItem.title}</h3>
                    <p>${caseItem.description}</p>
                    <div class="case-details">
                        <div class="detail-row">
                            <span class="detail-label">Organ/Type:</span>
                            <span class="detail-value">${caseItem.organ}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Hospital:</span>
                            <span class="detail-value">${caseItem.hospital}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Location:</span>
                            <span class="detail-value">${caseItem.location}</span>
                        </div>
                    </div>
                    <div class="time-remaining">
                        <i class="fas fa-clock"></i>
                        <span>${caseItem.timeRemaining} remaining</span>
                    </div>
                </div>
                <div class="case-footer">
                    <span>${caseItem.donorsNotified} donors notified</span>
                </div>
            `;
            
            casesGrid.appendChild(caseCard);
        });
        
        // Add click event to case cards
        document.querySelectorAll('.case-card').forEach(card => {
            card.addEventListener('click', function() {
                const caseId = parseInt(this.dataset.id);
                const selectedCase = cases.find(c => c.id === caseId);
                openModal(selectedCase);
            });
        });
    }

    // Open modal with case details
    function openModal(caseItem) {
        modalTitle.textContent = caseItem.title;
        
        modalBody.innerHTML = `
            <div class="modal-case-details">
                <p><strong>Description:</strong> ${caseItem.description}</p>
                <div class="detail-row">
                    <span class="detail-label">Blood Type:</span>
                    <span class="detail-value">${caseItem.bloodType}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Organ Needed:</span>
                    <span class="detail-value">${caseItem.organ}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Hospital:</span>
                    <span class="detail-value">${caseItem.hospital}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Location:</span>
                    <span class="detail-value">${caseItem.location}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Urgency:</span>
                    <span class="detail-value ${caseItem.urgency === 'critical' ? 'urgency-critical' : caseItem.urgency === 'urgent' ? 'urgency-urgent' : 'urgency-high'}">${caseItem.urgency.toUpperCase()}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Time Remaining:</span>
                    <span class="detail-value">${caseItem.timeRemaining}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Donors Notified:</span>
                    <span class="detail-value">${caseItem.donorsNotified}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Contact:</span>
                    <span class="detail-value">${caseItem.contact}</span>
                </div>
                <div class="case-notes">
                    <h4>Case Details:</h4>
                    <p>${caseItem.caseDetails}</p>
                </div>
            </div>
        `;
        
        caseModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }

    // Open report case modal
    function openReportModal() {
        reportModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }

    // Close modal
    function closeModal() {
        caseModal.style.display = 'none';
        reportModal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    // Filter cases based on selected filters
    function filterCases() {
        const bloodType = bloodTypeFilter.value;
        const organType = organTypeFilter.value;
        const urgency = urgencyFilter.value;
        
        let filteredCases = criticalCases;
        
        if (bloodType !== 'all') {
            filteredCases = filteredCases.filter(caseItem => caseItem.bloodType === bloodType);
        }
        
        if (organType !== 'all') {
            filteredCases = filteredCases.filter(caseItem => caseItem.organ.toLowerCase() === organType.toLowerCase());
        }
        
        if (urgency !== 'all') {
            filteredCases = filteredCases.filter(caseItem => caseItem.urgency === urgency);
        }
        
        displayCases(filteredCases);
    }

    // Update stats
    function updateStats() {
        // Calculate stats based on cases
        const totalCases = criticalCases.length;
        const matchedCases = Math.floor(totalCases * 0.8); // 80% match rate for demo
        const avgResponseTime = Math.floor(Math.random() * 60) + 15; // Random between 15-75 mins
        
        // Animate counting up
        animateValue(livesSavedEl, 0, matchedCases * 2, 2000);
        animateValue(casesMatchedEl, 0, matchedCases, 2000);
        animateValue(responseTimeEl, 0, avgResponseTime, 2000);
        animateValue(successRateEl, 0, 94, 2000, true);
    }

    // Animate value counting up
    function animateValue(element, start, end, duration, isPercentage = false) {
    let startTimestamp = null;
    const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        const value = Math.floor(progress * (end - start) + start);
        element.textContent = isPercentage ? `${value}%` : value; // Fixed template literal
        if (progress < 1) {
            window.requestAnimationFrame(step);
        }
    };
    window.requestAnimationFrame(step);
}


    // Handle form submission
    caseForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Create new case object
        const newCase = {
            id: Date.now(),
            title: document.getElementById('caseTitle').value,
            description: document.getElementById('caseDescription').value,
            bloodType: document.getElementById('caseBloodType').value,
            organ: document.getElementById('caseOrgan').value,
            hospital: document.getElementById('caseHospital').value,
            location: document.getElementById('caseLocation').value,
            urgency: document.getElementById('caseUrgency').value,
            timeRemaining: document.getElementById('caseTimeRemaining').value,
            donorsNeeded: parseInt(document.getElementById('caseDonorsNeeded').value),
            donorsNotified: Math.floor(Math.random() * 20) + 5, // Random between 5-25 for demo
            contact: document.getElementById('caseContact').value,
            caseDetails: document.getElementById('caseDetails').value,
            timestamp: Date.now()
        };
        
        // Add to cases array
        criticalCases.push(newCase);
        
        // Save to localStorage
        localStorage.setItem('criticalCases', JSON.stringify(criticalCases));
        
        // Update display
        filterCases();
        updateStats();
        
        // Close modal and reset form
        closeModal();
        caseForm.reset();
        
        // Show success message
        alert('Critical case reported successfully! Donors are being notified.');
    });

    // Event listeners
    bloodTypeFilter.addEventListener('change', filterCases);
    organTypeFilter.addEventListener('change', filterCases);
    urgencyFilter.addEventListener('change', filterCases);
    
    closeModalBtns.forEach(btn => {
        btn.addEventListener('click', closeModal);
    });
    
    closeBtn.addEventListener('click', closeModal);
    respondBtn.addEventListener('click', function() {
        alert('Thank you for responding to this critical case! The medical team will contact you shortly.');
        closeModal();
    });
    
    reportCaseBtn.addEventListener('click', openReportModal);
    cancelCaseBtn.addEventListener('click', closeModal);
    
    // Close modal when clicking outside
    window.addEventListener('click', function(event) {
        if (event.target === caseModal || event.target === reportModal) {
            closeModal();
        }
    });

    // Hamburger menu functionality for mobile
    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');
    
    hamburger.addEventListener('click', function() {
        navLinks.classList.toggle('active');
    });
    
    // Initialize
    displayCases(criticalCases);
    updateStats();
    
    // Simulate real-time updates (for demo purposes)
    setInterval(() => {
        // Randomly update donors notified count for demo
        criticalCases = criticalCases.map(caseItem => {
            return {
                ...caseItem,
                donorsNotified: Math.min(
                    caseItem.donorsNotified + Math.floor(Math.random() * 3),
                    caseItem.donorsNeeded * 5
                )
            };
        });
        
        // Save to localStorage
        localStorage.setItem('criticalCases', JSON.stringify(criticalCases));
        
        // Update display
        filterCases();
    }, 10000); // Update every 10 seconds
});
    </script>

    <script src="scripts.js"></script>
</body>
</html>